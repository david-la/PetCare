<!DOCTYPE html> 
<html>

<head>

	<meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

	<title>PetCare - Messages</title>

    <link rel="shortcut icon" type="image/x-icon" href="assets/favicon.ico"/>

    <!-- Bootstrap Core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
	<link rel="stylesheet" href="stylesheets/style.css" type="text/css"/>

    <!-- Custom Fonts -->
	<link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet' type='text/css'>

    <!-- Font Awesome Icons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

</head>

<body ng-app="message" ng-controller="messageController">

    <!-- Navigation -->
    <nav class="navbar" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="toggle" data-toggle="collapse" data-target="#navbar1">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="logo" href="/">PetCare</a>
            </div>
            <div class="collapse collapse-bar" id="navbar1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="search_petsitter">Hire a Pet Sitter</a>
                    </li>
                    <li>
                        <a href="search_pet">Offer Pet Sitting</a>
                    </li>
                    <li class="sign-up">
                        <div class="dropdown">
                            <a class="btn dropdown-toggle" type="button" id="dropdownUserMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">user@email.com</a>
                            <ul class="dropdown-menu" aria-labelledby="dropdownUserMenu">
                                <li><a href="#">Settings</a></li>
                                <li><a href="/applications">Applications<div class="new">6</div></a></li>
                                <li><a href="/messages">Messages<div class="new">12</div></a></li>
                                <li><a href="#">Logout</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Messages -->
    <div class="messages">
        <div class="container">

            <!-- Inbox -->
            <div class="panel panel-default inbox">
                <div class="panel-heading">Inbox</div>

                <div class="panel-body">
                    <div class="message-container">
                        <div class="message" ng-repeat="message in inbox | filter:query | orderBy: '-created_at' ">
                            <div class="info" ng-click="setRead(message.msg_id)">
                                <div class="user">{{message.from}}</div>
                                <div class="read {{message.read}}">{{isReadInbox(message.read)}}</div>
                                <div class="date">{{message.created_at|date:'MM/dd/yyyy hh:mma'}}</div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="content">
                                <div>
                                    {{message.message}}
                                </div>
                                <div class="reply" data-toggle="modal" data-target="#messageModal" ng-click="reply(message.from_id)">
                                    <i class="fa fa-reply"></i>&nbsp;&nbsp;Reply
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Sent -->
            <div class="panel panel-default sent">
                <div class="panel-heading">Sent</div>

                <div class="panel-body">
                    <div class="message-container">
                        <div class="message" ng-repeat="message in sent | filter:query | orderBy: '-created_at' " on-finish-render>
                            <div class="info">
                                <div class="user">{{message.to}}</div>
                                <div class="read {{message.read}}">{{isReadSent(message.read)}}</div>
                                <div class="date">{{message.created_at|date:'MM/dd/yyyy hh:mma'}}</div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="content">
                                <div>
                                    {{message.message}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- Message Modal -->
    <div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Message</h4>
                </div>
                <div class="modal-body">
                    <form role="form">
                        <div class="form-group">
                            <textarea name="comment" ng-model="reply_msg"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="send()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-label">
            	About Us
            </div>

            <div class="description">
            	PetCare is an online service where individuals who are looking for someone to take care of their pets can connect with pet sitters in their community who are experienced in taking care of pets. Users can register on the system and look for a pet sitter or offer their pet sitting services, or both.
            </div>

            <div class="icons">
            	<i class="fa fa-twitter"></i>
            	<i class="fa fa-facebook"></i>
            	<i class="fa fa-youtube-play"></i>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    
    <!-- AngularJS -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.2/angular.min.js"></script>
    <script type="text/javascript" src="javascripts/app.js"></script>

    <script src="javascripts/message.js"></script>

    </script>

</body>

</html>